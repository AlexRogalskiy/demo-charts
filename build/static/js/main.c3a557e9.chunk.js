(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{313:function(e,t,a){e.exports=a(692)},318:function(e,t,a){},692:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(30),o=a.n(i),c=(a(318),a(51)),l=a(21),s=a(23),m=a(28),u=a(27),d=a(29),p=a(278),h=a.n(p),f=a(124),E=a(31),y=a(33),b=a(173),v=a(171),g=a.n(v),T=a(63),O=a.n(T),k=a(26),C=a.n(k),w=a(25),x=a.n(w),N=a(117),S=a.n(N),L=a(86),R=a(40),I=a.n(R),j=a(174),D=a.n(j),P=a(175),A=a.n(P),M=a(49),G=a.n(M),U=a(279),B=a.n(U),H=a(97),W=a.n(H),J=a(176),F=a(122),_=a.n(F),Y=a(177),z=a.n(Y),Z={ENGINEERING:"ENGINEERING",OPERATIONS:"OPERATIONS",PRODUCT:"PRODUCT",PORTFOLIO:"PORTFOLIO",DATA:"DATA",DESIGN:"DESIGN"},V={EMPLOYEE:"EMPLOYEE",DEPARTMENT:"DEPARTMENT",TRIBE:"TRIBE",SQUAD:"SQUAD",TEAM:"TEAM",UNIT:"UNIT"},K={EMPLOYEE:"EMPLOYEE",TEMP:"TEMP",CONTRACTOR:"CONTRACTOR",AGENCY_CONTRACTOR:"AGENCY_CONTRACTOR"},Q=function e(t,a,n,r,i,o,c,s,m,u){Object(l.a)(this,e),this.id=t,this.name=a,this.title=n,this.reportsTo=r,this.memberOf=i,this.stream=o,this.number=c,this.github=s,this.startDate=m||"",this.type=u||K.EMPLOYEE},q=function e(t,a,n,r,i,o,c,s,m){Object(l.a)(this,e),this.id=t,this.name=a,this.kind=n,this.parent=r,this.vacancies=i||{},this.backfills=m||{},this.techLead=o,this.productLead=c,this.description=s};var X=new(function(){function e(t,a){Object(l.a)(this,e),this.employees=t,this.teams=a}return Object(s.a)(e,[{key:"toLiteral",value:function(){return{employees:this.employees.map(function(e){return Object.assign({},e)}).sort(function(e,t){return e.name===t.name?0:e.name>t.name?1:-1}),teams:this.teamHierarchy(),reporting:this.reportingHierarchy(),rootEmployee:this.rootEmployee}}},{key:"teamsById",value:function(){var e={};return this.teams.forEach(function(t){e[t.id]=t}),e}},{key:"reportingHierarchy",value:function(){var e=this.rootEmployee,t={};this.teams.forEach(function(e){t[e.id]=e});var a={};return this.employees.forEach(function(n){var r=Object.assign({},n);if(r.children=[],a[n.id]=r,r.memberOf){if(!r.reportsTo){var i=t[r.memberOf];i.techLead!==r.id&&i.productLead!==r.id||(i=t[i.parent]),r.reportsTo=i&&$(i,t,r)||e}}else r.reportsTo=e}),Object.values(a).forEach(function(t){t.id!==e&&a[t.reportsTo].children.push(t)}),a[e]}},{key:"teamHierarchy",value:function(){var e={};this.teams.forEach(function(t){e[t.id]=Object.assign({},t),e[t.id].children=[],e[t.id].members=[]});var t=this.teams.filter(function(e){return!e.parent});if(0===t.length)return null;if(t.length>1)throw new Error("Error while building team hierarchy, more than one root defined [".concat(t.map(function(e){return e.id}).join(", "),"]."));var a={};this.employees.forEach(function(e){a[e.id]=e});var n=e[t[0].id];return this.teams.forEach(function(t){if(t.parent){if(!e[t.parent])throw new Error("Error while building team hierarchy, parent ".concat(t.parent," not found for team ").concat(t.name));e[t.parent].children.push(e[t.id])}t.techLead&&a[t.techLead]&&(e[t.id].techLead=Object.assign({},a[t.techLead])),t.productLead&&a[t.productLead]&&(e[t.id].productLead=Object.assign({},a[t.productLead]))}),this.employees.forEach(function(t){if(t.memberOf){if(!e[t.memberOf])throw new Error("Error while building team hierarchy, team ".concat(t.memberOf," not found for employee ").concat(t.name));e[t.memberOf].members.push(Object.assign({},t))}}),n}},{key:"reparentTeam",value:function(e,t){this.teams.find(function(t){return t.id===e}).parent=t}},{key:"removeFromTeam",value:function(e){this.employees.find(function(t){return t.id===e}).memberOf=null}},{key:"addToTeam",value:function(e,t){this.employees.find(function(t){return t.id===e}).memberOf=t}},{key:"toJSON",value:function(){return JSON.stringify({employees:this.employees.sort(function(e,t){return e.name===t.name?0:e.name>t.name?1:-1}),teams:this.teams.sort(function(e,t){return e.name===t.name?0:e.name>t.name?1:-1}),rootEmployee:this.rootEmployee},null,2)}},{key:"fromJSON",value:function(e){try{var t=JSON.parse(e);this.parseData(t)}catch(a){alert("JSON.parse error, check console")}}},{key:"parseData",value:function(e){this.employees=e.employees.map(function(e){return Object.assign(new Q,e)}),this.teams=e.teams.map(function(e){return Object.assign(new q,e)}),this.rootEmployee=e.rootEmployee||"damon_petta"}},{key:"changeHeadcount",value:function(e,t,a){a=parseInt(a,10),isNaN(a)&&(a=void 0),this.teams.find(function(t){return t.id===e}).vacancies[t]=a}},{key:"changeBackfills",value:function(e,t,a){a=parseInt(a,10),isNaN(a)&&(a=void 0),this.teams.find(function(t){return t.id===e}).backfills[t]=a}},{key:"addNewTeam",value:function(e,t,a,n){this.teams.push(new q(function(e,t){return"".concat(e,"_").concat(t).toLowerCase().replace(/[^a-z0-9]+/,"_")}(e,t),e,t,a,void 0,void 0,void 0,n))}},{key:"changeTeamName",value:function(e,t){this.teams.find(function(t){return t.id===e}).name=t}},{key:"changeTeamDescription",value:function(e,t){this.teams.find(function(t){return t.id===e}).description=t}},{key:"saveData",value:function(){var e=Object(J.a)(W.a.mark(function e(t){var a,n,r=this;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new _.a(t)).protocol.startsWith("couch")){e.next=4;break}return alert("Unsupported storage, try couchdb://"),e.abrupt("return");case 4:return a.protocol.startsWith("couchdbs")?a.protocol="https:":a.protocol="http:",n=new z.a(a.protocol+"//"+a.host,a.pathname.substr(1)),e.next=8,n.put("chart",{employees:this.employees,teams:this.teams},this.documentRevision).then(function(e){r.documentRevision=e.rev}).catch(function(e){alert("failed to save data: "+e.message)});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(J.a)(W.a.mark(function e(t){var a,n,r,i,o,l,s,m=this;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=new _.a(t),i=void 0,!a.protocol.startsWith("couch")){e.next=17;break}return i=t,(o=new _.a(t)).auth="",o.password="",o.username="",r=o.toString(),a.protocol.startsWith("couchdbs")?a.protocol="https:":a.protocol="http:",l=new z.a(a.protocol+"//"+a.host,a.pathname.substr(1)),e.next=14,l.get("chart").then(function(e){return m.documentRevision=e._rev,Object(c.a)({employees:[],teams:[]},e)}).catch(function(e){return alert("failed to load data: "+e.message),n={employees:[],teams:[]}});case 14:n=e.sent,e.next=24;break;case 17:return e.next=19,fetch(t);case 19:return s=e.sent,e.next=22,s.json();case 22:n=e.sent,r=t;case 24:return localStorage.setItem("dataURL",r),localStorage.setItem("persistURL",i),e.abrupt("return",this.parseData(n));case 29:e.prev=29,e.t0=e.catch(0),alert("failed to load: "+e.t0.message);case 32:case"end":return e.stop()}},e,this,[[0,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"removeTeam",value:function(e){var t=this.teams.find(function(t){return t.id===e});this.employees.forEach(function(t){t.memberOf===e&&(t.memberOf=void 0)});var a=t.parent;this.teams.forEach(function(t){t.parent===e&&(t.parent=a)}),this.teams=this.teams.filter(function(t){return t.id!==e})}},{key:"addEmployee",value:function(e,t,a,n,r,i,o,c){this.employees.push(new Q(function(e){return"".concat(e).toLowerCase().replace(/[^a-z0-9]+/,"_")}(e),e,t,n,void 0,a,r,i,""===o?null:o,c))}},{key:"editEmployee",value:function(e,t,a,n,r,i,o,c,l){var s=this.employees.find(function(t){return t.id===e});s.name=t,s.title=a,s.stream=n,s.reportsTo=r,s.number=i,s.github=o,s.startDate=""===c?null:c,s.type=l}},{key:"removeEmployee",value:function(e){this.employees.filter(function(t){return t.reportsTo===e}).forEach(function(e){e.reportsTo=void 0}),this.teams.filter(function(t){return t.techLead===e}).forEach(function(e){e.techLead=void 0}),this.teams.filter(function(t){return t.productLead===e}).forEach(function(e){e.productLead=void 0}),this.employees=this.employees.filter(function(t){return t.id!==e})}},{key:"setTechLead",value:function(e,t){this.teams.find(function(t){return t.id===e}).techLead=t}},{key:"setProductLead",value:function(e,t){this.teams.find(function(t){return t.id===e}).productLead=t}}]),e}())([],[]);var $=function(e,t,a){var n;switch(a.stream){case Z.PRODUCT:case Z.DESIGN:case Z.DATA:n="productLead";break;case Z.ENGINEERING:case Z.OPERATIONS:n="techLead";break;default:n="techLead"}var r=e;if(r[n])return r[n];for(;r.parent&&t[r.parent];)if((r=t[r.parent])[n])return r[n];return null},ee=function(e){return function t(a,n){return n.id===e?a:(a.push(n),n.children&&n.children.length>0&&n.children.reduce(t,a),a)}};function te(e,t,a){var n;return function(){var r=this,i=arguments,o=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||e.apply(r,i)},t),o&&e.apply(r,i)}}var ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={team:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.state.team){var a=[e.data.get("teams").toJS()].reduce(ee(),[]);this.setState({team:a.find(function(e){return e.id===t.state.team.id})})}}},{key:"render",value:function(){var e=this;return this.props.data.get("teams")?r.a.createElement(E.Flex,{p:0,align:"center"},r.a.createElement(E.Box,{pb:0,w:1/3,style:{alignSelf:"flex-start"}},r.a.createElement(re,{team:this.props.data.get("teams").toJS(),onSelect:function(t){e.setState({team:t})},addNewTeam:this.props.actions.addNewTeam})),r.a.createElement(E.Box,{pb:0,w:1/3,style:{alignSelf:"flex-start"}},r.a.createElement(ne,Object.assign({root:this.props.data.get("teams").toJS(),team:this.state.team},this.props.actions,{employees:this.props.data.get("employees").toJS()}))),r.a.createElement(E.Box,{pb:0,w:1/3,style:{alignSelf:"flex-start",maxHeight:"90vh",overflow:"auto"}},r.a.createElement(oe,{employees:this.props.data.get("employees").toJS(),exclude:this.state.team?this.state.team.id:null,addToTeam:function(t){e.props.actions.addToTeam(t,e.state.team.id)},teams:[this.props.data.get("teams").toJS()].reduce(ee(),[]),addEmployee:this.props.actions.addEmployee,editEmployee:this.props.actions.editEmployee,removeEmployee:this.props.actions.removeEmployee}))):null}}]),t}(r.a.Component);var ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).onNameChange=function(e,t){a.setState({name:t}),a.debouncedChangeTeamName(e,t)},a.onDescriptionChange=function(e,t){a.setState({description:t}),a.debouncedChangeTeamDescription(e,t)},a.state={name:""},a.debouncedChangeTeamName=te(e.changeTeamName,500,!1),a.debouncedChangeTeamDescription=te(e.changeTeamDescription,500,!1),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.team?e.team.name:"",description:e.team&&e.team.description?e.team.description:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.root,n=t.team,i=t.reparentTeam,o=t.removeFromTeam,c=t.changeHeadcount,l=t.changeBackfills,s=t.removeTeam,m=t.employees,u=t.setProductLead,d=t.setTechLead;if(!n)return null;var p=Object(f.a)(new Set(function e(t,a){return a.members&&(t=t.concat(a.members)),a.parent&&(t=e(t,a.parent)),t}([],n).map(function(e){return e.stream}))).sort();return p=-1!==p.indexOf(Z.PORTFOLIO)?[Z.PORTFOLIO]:-1!==p.indexOf(Z.OPERATIONS)?[Z.OPERATIONS]:[Z.ENGINEERING,Z.PRODUCT,Z.DATA,Z.DESIGN],r.a.createElement("div",null,r.a.createElement(x.a,{value:this.state.name,floatingLabelText:"Name",fullWidth:!0,onChange:function(t,a){e.onNameChange(n.id,a)}}),r.a.createElement(O.a,{floatingLabelText:"Member of",fullWidth:!0,value:n.parent,onChange:function(e,t,a){return i(n.id,a)}},[a].reduce(ee(n.id),[]).map(function(e){return r.a.createElement(C.a,{key:e.id,value:e.id,primaryText:e.name})})),r.a.createElement(b.CardHeader,{title:"Vacancies"}),r.a.createElement(E.Flex,{p:0},Object(f.a)(new Set(Object.keys(n.vacancies).concat(p))).sort().map(function(e){return r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"},key:"vacancies_".concat(e)},r.a.createElement(x.a,{onChange:function(t,a){return c(n.id,e,a)},floatingLabelText:e.toLowerCase(),value:void 0!==n.vacancies[e]?n.vacancies[e]:""}))})),r.a.createElement(b.CardHeader,{title:"Backfills"}),r.a.createElement(E.Flex,{p:0},Object(f.a)(new Set(Object.keys(n.vacancies).concat(p))).sort().map(function(e){return r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"},key:"backfills_".concat(e)},r.a.createElement(x.a,{onChange:function(t,a){return l(n.id,e,a)},floatingLabelText:e.toLowerCase(),value:void 0!==n.backfills[e]?n.backfills[e]:""}))})),r.a.createElement(O.a,{floatingLabelText:"Tech lead",fullWidth:!0,value:n.techLead?n.techLead.id:null,onChange:function(e,t,a){return d(n.id,a)}},r.a.createElement(C.a,{value:null,primaryText:""}),m.map(function(e){return r.a.createElement(C.a,{key:e.id,value:e.id,primaryText:e.name})})),r.a.createElement(O.a,{floatingLabelText:"Product lead",fullWidth:!0,value:n.productLead?n.productLead.id:null,onChange:function(e,t,a){return u(n.id,a)}},r.a.createElement(C.a,{value:null,primaryText:""}),m.filter(function(e){return e.stream===Z.PRODUCT}).map(function(e){return r.a.createElement(C.a,{key:e.id,value:e.id,primaryText:e.name})})),r.a.createElement(g.a,null,"Members"),r.a.createElement(y.List,null,n.members.map(function(e){return r.a.createElement(y.ListItem,{onClick:function(){return o(e.id)},primaryText:e.name,key:e.id,secondaryText:e.title})})),r.a.createElement(x.a,{value:this.state.description,floatingLabelText:"Description",fullWidth:!0,multiLine:!0,rowsMax:6,rows:3,onChange:function(t,a){e.onDescriptionChange(n.id,a)}}),r.a.createElement(I.a,{fullWidth:!0,label:"Delete",secondary:!0,onClick:function(){window.confirm("Ya?\nAll employees who are part of this team will be unassigned.\nAll child teams will be assigned to parent.")&&s(n.id)}}))}}]),t}(r.a.Component),re=function(e){var t=e.team,a=e.onSelect,n=e.addNewTeam;return r.a.createElement(y.List,null,r.a.createElement(y.ListItem,{onClick:function(){return a(t)},primaryTogglesNestedList:!1,initiallyOpen:!0,primaryText:t.name,key:t.id,nestedItems:ie(t.children,a)}),r.a.createElement(y.ListItem,null,r.a.createElement(le,{parents:[t].reduce(ee(),[]),addNewTeam:n})))},ie=function e(t,a){return t?t.map(function(t){return r.a.createElement(y.ListItem,{onClick:function(){return a(t)},primaryTogglesNestedList:!0,primaryText:t.name,key:t.id,nestedItems:e(t.children,a)})}):null},oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSearchChange=function(e){a.setState({search:e.target.value})},a.handleFilterChange=function(e,t){a.setState({filter:t})},a.state={search:"",filter:!1,addPersonOpen:!1,editedPerson:null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.employees,n=t.exclude,i=t.addToTeam,o=t.teams;return r.a.createElement("div",null,r.a.createElement(y.List,{style:{maxHeight:"100%",overflow:"auto"}},r.a.createElement(y.ListItem,null,r.a.createElement(I.a,{label:"Add",fullWidth:!0,onClick:function(){e.setState({addPersonOpen:!0,editedPerson:null})}}),r.a.createElement(x.a,{fullWidth:!0,hintText:"Search",value:this.state.search,onChange:this.handleSearchChange}),r.a.createElement(S.a,{label:"unassigned only",onCheck:this.handleFilterChange})),a.filter(function(t){return t.memberOf!==n&&-1!==t.name.toLowerCase().search(e.state.search.toLowerCase())&&(!e.state.filter||!t.memberOf)}).map(function(t){var a=o.find(function(e){return e.id===t.memberOf}),c=t.title;return t.github&&(c="".concat(c," [gh: ").concat(t.github,"]")),a&&(c="".concat(c," - ").concat(a.name)),"TEMP"===t.type&&(c="[TMP] ".concat(c)),"CONTRACTOR"===t.type&&(c="[CON] ".concat(c)),"AGENCY_CONTRACTOR"===t.type&&(c="[AGN] ".concat(c)),t.startDate&&(c="".concat(t.startDate," - ").concat(c)),r.a.createElement(y.ListItem,{primaryText:t.name+" #".concat(t.number),key:t.id,onClick:function(){return n&&i(t.id)},secondaryText:c,rightIconButton:r.a.createElement(G.a,{tooltip:"edit",onClick:function(){e.setState({addPersonOpen:!0,editedPerson:t})}},r.a.createElement(B.a,null))})})),r.a.createElement(ce,{open:this.state.addPersonOpen,person:this.state.editedPerson,afterClose:function(){e.setState({addPersonOpen:!1,editedPerson:null})},addEmployee:this.props.addEmployee,editEmployee:this.props.editEmployee,removeEmployee:this.props.removeEmployee,employees:a}))}}]),t}(r.a.Component),ce=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,id:null,name:"",title:"",stream:Z.ENGINEERING,reportsTo:null,github:"",number:"",type:K.EMPLOYEE,startDate:""},a.handleClose=function(){a.props.afterClose()},a.submit=function(){var e=a.state,t=e.id,n=e.name,r=e.title,i=e.stream,o=e.reportsTo,c=e.number,l=e.github,s=e.type,m=e.startDate;n&&r&&i&&s&&(t?a.props.editEmployee(t,n,r,i,o,c,l,m,s):a.props.addEmployee(n,r,i,o,c,l,m,s),a.handleClose())},a.delete=function(){var e=a.state.id;return e?(window.confirm("Really, but like... really really?")&&a.props.removeEmployee(e),a.handleClose()):a.handleClose()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props!==e&&this.setState(Object(c.a)({open:e.open,id:null,name:"",title:"",github:"",number:"",stream:Z.ENGINEERING,reportsTo:null,type:K.EMPLOYEE,startDate:""},e.person))}},{key:"render",value:function(){var e=this,t=[r.a.createElement(D.a,{label:"Cancel",primary:!0,onClick:this.handleClose}),r.a.createElement(I.a,{label:"Submit",primary:!0,onClick:this.submit})];return r.a.createElement(A.a,{title:this.props.person?"Edit Employee":"Add New Employee",actions:t,modal:!1,open:this.state.open,onRequestClose:this.handleClose},r.a.createElement(x.a,{floatingLabelText:"Full Name",onChange:function(t,a){e.setState({name:a})},value:this.state.name}),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Title",onChange:function(t,a){e.setState({title:a})},value:this.state.title}),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Start Date",onChange:function(t,a){e.setState({startDate:a})},value:this.state.startDate}),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"GitHub",onChange:function(t,a){e.setState({github:a})},value:this.state.github}),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Employee #",onChange:function(t,a){e.setState({number:a})},value:this.state.number}),r.a.createElement("br",null),r.a.createElement(O.a,{onChange:function(t,a,n){e.setState({stream:n})},fullWidth:!0,value:this.state.stream,floatingLabelText:"Stream"},r.a.createElement(C.a,{key:Z.ENGINEERING,value:Z.ENGINEERING,primaryText:Z.ENGINEERING}),r.a.createElement(C.a,{key:Z.PRODUCT,value:Z.PRODUCT,primaryText:Z.PRODUCT}),r.a.createElement(C.a,{key:Z.DATA,value:Z.DATA,primaryText:Z.DATA}),r.a.createElement(C.a,{key:Z.DESIGN,value:Z.DESIGN,primaryText:Z.DESIGN}),r.a.createElement(C.a,{key:Z.OPERATIONS,value:Z.OPERATIONS,primaryText:Z.OPERATIONS}),r.a.createElement(C.a,{key:Z.PORTFOLIO,value:Z.PORTFOLIO,primaryText:Z.PORTFOLIO})),r.a.createElement(O.a,{onChange:function(t,a,n){e.setState({type:n})},fullWidth:!0,value:this.state.type,floatingLabelText:"Type"},r.a.createElement(C.a,{key:K.EMPLOYEE,value:K.EMPLOYEE,primaryText:K.EMPLOYEE}),r.a.createElement(C.a,{key:K.CONTRACTOR,value:K.CONTRACTOR,primaryText:K.CONTRACTOR}),r.a.createElement(C.a,{key:K.AGENCY_CONTRACTOR,value:K.AGENCY_CONTRACTOR,primaryText:K.AGENCY_CONTRACTOR}),r.a.createElement(C.a,{key:K.TEMP,value:K.TEMP,primaryText:K.TEMP})),r.a.createElement(O.a,{onChange:function(t,a,n){e.setState({reportsTo:"--inherit--"===n?void 0:n})},fullWidth:!0,value:this.state.reportsTo,floatingLabelText:"Reports to"},r.a.createElement(C.a,{key:"_report-none",value:"--inherit--",primaryText:""}),this.props.employees.map(function(e){return r.a.createElement(C.a,{key:e.id,value:e.id,primaryText:e.name})})),r.a.createElement(I.a,{label:"DELETE",secondary:!0,onClick:this.delete}))}}]),t}(r.a.Component),le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,name:"",kind:V.SQUAD,parent:""},a.handleOpen=function(){a.setState({open:!0,name:"",kind:V.SQUAD,parent:"",description:""})},a.handleClose=function(){a.setState({open:!1})},a.submit=function(){var e=a.state,t=e.name,n=e.kind,r=e.parent,i=e.description;t&&n&&r&&i&&(a.props.addNewTeam(t,n,r,i),a.setState({open:!1}))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[r.a.createElement(D.a,{label:"Cancel",primary:!0,onClick:this.handleClose}),r.a.createElement(I.a,{label:"Submit",primary:!0,onClick:this.submit})];return r.a.createElement("div",null,r.a.createElement(I.a,{label:"Add",fullWidth:!0,onClick:this.handleOpen}),r.a.createElement(A.a,{title:"Add New Team",actions:t,modal:!1,open:this.state.open,onRequestClose:this.handleClose},r.a.createElement(x.a,{floatingLabelText:"Team name",onChange:function(t,a){e.setState({name:a})},value:this.state.name}),r.a.createElement(L.RadioButtonGroup,{name:"kind",onChange:function(t,a){e.setState({kind:a})},labelPosition:"right",valueSelected:this.state.kind},r.a.createElement(L.RadioButton,{value:V.SQUAD,label:V.SQUAD}),r.a.createElement(L.RadioButton,{value:V.TRIBE,label:V.TRIBE}),r.a.createElement(L.RadioButton,{value:V.TEAM,label:V.TEAM}),r.a.createElement(L.RadioButton,{value:V.UNIT,label:V.UNIT})),r.a.createElement(O.a,{onChange:function(t,a,n){e.setState({parent:n})},fullWidth:!0,value:this.state.parent,floatingLabelText:"Member of"},this.props.parents.map(function(e){return r.a.createElement(C.a,{key:e.id,value:e.id,primaryText:e.name})})),r.a.createElement(x.a,{floatingLabelText:"Description",multiLine:!0,rowsMax:6,rows:4,onChange:function(t,a){e.setState({description:a})},value:this.state.description})))}}]),t}(r.a.Component),se=a(178),me=a(64),ue=a(179),de=a.n(ue),pe=a(20),he=function(e,t,a){var n=window.innerHeight-100,r=window.innerWidth;var i=pe.j("#"+e).append("div").classed("svg-container",!0).style("width","".concat(r,"px")).style("height","".concat(n,"px")).style("background-color","white").append("svg").attr("preserveAspectRatio","xMinYMin meet").classed("svg-content-responsive",!0).attr("width","100%").attr("height","100%").append("g").attr("transform","translate("+r/2+","+n/2+")").call(pe.k().on("zoom",function(){c.attr("transform",pe.c.transform)})).on("dblclick.zoom",null),o=i.append("defs");o.append("pattern").attr("id","diagonalHatch").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("path").attr("shape-rendering","cripsEdges").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#000000").attr("stroke-width",1).attr("opacity",.3),o.append("pattern").attr("id","pattern-stripe").attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").attr("width",3).attr("height",4).attr("transform","translate(0,0)").attr("fill","gray"),o.append("mask").attr("id","diagonalHatchMask").append("rect").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","url(#smallDot)"),o.append("pattern").attr("id","smallDotColor").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("image").attr("href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc1JyBoZWlnaHQ9JzUnPgo8cmVjdCB3aWR0aD0nNScgaGVpZ2h0PSc1JyBmaWxsPScjZmZmJy8+CjxyZWN0IHdpZHRoPScxJyBoZWlnaHQ9JzEnIGZpbGw9JyNjY2MnLz4KPC9zdmc+").attr("x",0).attr("y",0),o.append("pattern").attr("id","smallDot").attr("patternUnits","userSpaceOnUse").attr("width",4).attr("height",4).append("image").attr("href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc1JyBoZWlnaHQ9JzUnPgo8cmVjdCB3aWR0aD0nNScgaGVpZ2h0PSc1JyBmaWxsPScjZmZmJy8+CjxyZWN0IHdpZHRoPScxJyBoZWlnaHQ9JzEnIGZpbGw9JyNjY2MnLz4KPC9zdmc+").attr("x",0).attr("y",0);var c=i.append("g").attr("class","graph").attr("width","100%").attr("height","100%");c.selectAll("*").remove(),t(r,n,a)(c)};function fe(e){var t=pe.j("#".concat(e," .svg-container svg")).attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML;return new Blob([t],{type:"image/svg+xml"})}var Ee=function(e){return function(t,a,n){pe.j("svg").attr("title",n);var r=Math.min(t,a)/2+50,i=pe.g().range([0,2*Math.PI]),o=pe.g().range([0,r]),c=pe.h(pe.i),l=function(e,t){return"technology_board"===e.id?"Technology Board":"product_board"===e.id?"Product Board":"team"===e.type?"".concat(e.name," ").concat(e.group_actual,"/").concat(e.group):"TEMP"===e.type?"[TMP] "+e.name:"CONTRACTOR"===e.type?"[CON] "+e.name:"AGENCY_CONTRACTOR"===e.type?"[AGN] "+e.name:"vacancy"===e.kind?"[HC] "+e.name:"backfill"===e.kind?"[BF] "+e.name:e.name?e.name:t?e.title:""},s=pe.a().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,i(e.x0)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,i(e.x1)))}).innerRadius(function(e){return Math.max(0,o(e.y0))}).outerRadius(function(e){return Math.max(0,o(e.y1))}),m=function(e){var t=180/Math.PI*(s.startAngle()(e)+s.endAngle()(e))/2-90;return t>90?t-180:t},u=pe.f(),d=pe.d(e,function(e){return e.children});return d.sum(function(e){return e.children&&e.children.length>0?0:100}),function(e){var t={start:{x:null,y:null,angle:null}},a=e.selectAll("path").data(u(d).descendants()).enter().append("g").attr("transform","rotate(0, 0, 0)").call(pe.b().filter(function(){return pe.c.shiftKey}).on("start",function(){t.start.x=pe.c.x,t.start.y=pe.c.y;var e=a.attr("transform").match(/rotate\(([-+]?([0-9]*\.[0-9]+|[0-9]+)).*/);t.start.angle=parseFloat(e[1])}).on("drag",function(){var e=180*Math.atan2(pe.c.y-t.start.y,pe.c.x-t.start.x)/Math.PI;a.attr("transform","rotate(".concat(t.start.angle+e,", 0, 0)"))}));a.append("path").attr("d",s).style("fill",function(e){return"vacancy"!==e.data.kind&&"backfill"!==e.data.kind||!e.data.name.endsWith("ENGINEERING")?"vacancy"===e.data.kind||"backfill"===e.data.kind?"url(#diagonalHatch)":(e.data.type&&e.data.type,c(l((e.children?e:e.parent).data,!0))):"url(#smallDot)"}).attr("stroke","black").attr("stoke-width",.2).attr("fill-opacity",function(e){return e.data.startDate?.6:1}).style("mask",function(e){return null}).on("dblclick",function(t,a){n.transition().attr("opacity",0),e.transition().duration(350).tween("scale",function(){var e=pe.e(i.domain(),[t.x0,t.x1]),a=pe.e(o.domain(),[t.y0,1]),n=pe.e(o.range(),[t.y0?20:0,r]);return function(t){i.domain(e(t)),o.domain(a(t)).range(n(t))}}).selectAll("path").attrTween("d",function(e){return function(){return s(e)}}).on("end",function(e,a){var n=function(e,t){for(var a=e.parent;a;){if(t===a.data.id)return!0;a=a.parent}return!1}(e,t.data.id);if(n||e.data.id===t.data.id){var r=pe.j(this.parentNode).select("text");r.transition().duration(750).attr("opacity",1).attr("transform",function(t){return t.depth>0?"translate("+s.centroid(e)+")rotate("+m(e)+")":null}).attr("x",function(t){return e.x})}})});var n=a.append("text").text(function(e){return l(e.data,1)}).attr("x",function(e){return e.x}).attr("text-anchor","middle").attr("transform",function(e){return e.depth>0?"translate("+s.centroid(e)+")rotate("+m(e)+")":null}).attr("dx","3").attr("dy",".35em").attr("pointer-events","none").style("font-size","0.65em")}}},ye=a(118),be=a.n(ye),ve=a(119),ge=a.n(ve),Te=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"renderChart",value:function(e,t,a){for(;this.refs.chart.firstChild;)this.refs.chart.removeChild(this.refs.chart.firstChild);var n=function e(t,a,n,r){if(r||(t.children=t.children.map(function(t){return e(t,a,n)})),a&&(t.children=t.children.concat(t.members)),n){for(var i in t.vacancies)for(var o=1;o<=t.vacancies[i];o++)t.children.push({name:"".concat(i),kind:"vacancy",id:"vacancy_".concat(t.id,"_").concat(i,"_").concat(o)});for(var c in t.backfills)for(var l=1;l<=t.backfills[c];l++)t.children.push({name:"".concat(c),kind:"backfill",id:"backfill_".concat(t.id,"_").concat(c,"_").concat(l)})}return t}(e,t,a),r=Ee(n);he("chart",r,"team-chart")}},{key:"componentWillReceiveProps",value:function(e){(this.props.teams||e)&&(e.teams===this.props.teams&&e.members===this.props.members&&e.vacancies===this.props.vacancies||this.renderChart(e.teams.toJS(),e.members,e.vacancies))}},{key:"componentDidMount",value:function(){this.props.teams&&this.renderChart(this.props.teams.toJS(),this.props.members,this.props.vacancies)}},{key:"render",value:function(){return r.a.createElement("div",{id:"chart",ref:"chart"})}}]),t}(r.a.Component),Oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).toggleMembers=function(e,t){a.setState({showMembers:t})},a.toggleVacancies=function(e,t){a.setState({showVacancies:t})},a.state={showVacancies:!0,showMembers:!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.Flex,{p:0,align:"center"},r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"}},r.a.createElement(de.a,{label:"show members",style:{width:"15vw"},toggled:this.state.showMembers,ref:"showMembers",onToggle:this.toggleMembers})),r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"}},r.a.createElement(de.a,{label:"show vacancies",style:{width:"15vw"},toggled:this.state.showVacancies,ref:"showVacancies",onToggle:this.toggleVacancies})),r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"}},r.a.createElement(G.a,{onClick:function(){var e=fe("chart");ge.a.saveAs(e,"team-structure.svg")}},r.a.createElement(be.a,null)))),r.a.createElement(Te,{teams:this.props.data.get("teams"),members:this.state.showMembers,vacancies:this.state.showVacancies}))}}]),t}(r.a.Component),ke=a(22),Ce=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(!this.props.data.get("teams"))return null;var e=this.props.data.get("teams").toJS(),t=this.props.data.get("employees").toJS(),a=this.props.data.get("teamsById").toJS(),n=[e].reduce(ee(),[]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,"New Starters"),r.a.createElement(Se,{employees:t,teams:a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Contractors"),r.a.createElement(Le,{employees:t,teams:a})),r.a.createElement("div",null,r.a.createElement("h3",null,"Totals"),r.a.createElement(Ne,{teams:n})),r.a.createElement("div",null,r.a.createElement("h3",null,"Engineering"),r.a.createElement(xe,{teams:n,engineering:!0,title:"Engineering"})),r.a.createElement("div",null,r.a.createElement("h3",null,"Product"),r.a.createElement(xe,{teams:n,product:!0})),r.a.createElement("div",null,r.a.createElement("h3",null,"Design"),r.a.createElement(xe,{teams:n,design:!0})),r.a.createElement("div",null,r.a.createElement("h3",null,"Data"),r.a.createElement(xe,{teams:n,data:!0})),r.a.createElement("div",null,r.a.createElement("h3",null,"Operations"),r.a.createElement(xe,{teams:n,operations:!0})))}}]),t}(r.a.Component);function we(e,t){var a=t.engineering,n=t.operations,r=t.portfolio,i=t.product,o=t.data,c=t.design,l=0;return e?(a&&e.ENGINEERING&&(l+=e.ENGINEERING),n&&e.OPERATIONS&&(l+=e.OPERATIONS),r&&e.PORTFOLIO&&(l+=e.PORTFOLIO),i&&e.PRODUCT&&(l+=e.PRODUCT),o&&e.DATA&&(l+=e.DATA),c&&e.DESIGN&&(l+=e.DESIGN),isNaN(l)&&console.log(l,e),l):l}var xe=function(e){var t=e.teams,a=e.engineering,n=e.operations,i=e.portfolio,o=e.product,c=e.data,l=e.design,s=(e.title,function(e){var t=e.engineering,a=e.operations,n=e.portfolio,r=e.product,i=e.data,o=e.design;return function(e){return!(!t||e.stream!==Z.ENGINEERING)||!(!a||e.stream!==Z.OPERATIONS)||!(!n||e.stream!==Z.PORTFOLIO)||!(!r||e.stream!==Z.PRODUCT)||!(!i||e.stream!==Z.DATA)||!(!o||e.stream!==Z.DESIGN)}}({engineering:a,operations:n,portfolio:i,product:o,data:c,design:l})),m=t.map(function(e){var t=e.members.filter(s).length,r=we(e.vacancies,{engineering:a,operations:n,portfolio:i,product:o,data:c,design:l}),m=we(e.backfills,{engineering:a,operations:n,portfolio:i,product:o,data:c,design:l});return"Technology Department"===e.name||!r&&!t?null:{name:e.name,members:t,vacancies:r,backfills:m}}).filter(function(e){return!!e});return r.a.createElement(ke.e,{width:"100%",minHeight:200},r.a.createElement(ke.b,{data:m},r.a.createElement(ke.g,{dataKey:"name"}),r.a.createElement(ke.h,null),r.a.createElement(ke.c,null),r.a.createElement(ke.f,null),r.a.createElement(ke.d,null),r.a.createElement(ke.a,{dataKey:"members",stackId:"a",fill:"#00ccc8"}),r.a.createElement(ke.a,{dataKey:"vacancies",stackId:"a",fill:"#f5aa3c"}),r.a.createElement(ke.a,{dataKey:"backfills",stackId:"a",fill:"#ea73ea"})))},Ne=function(e){var t=e.teams,a={};Object.keys(Z).forEach(function(e){a[e]={employees:0,vacancies:0,backfills:0}});var n=0;t.forEach(function(e){e.members.forEach(function(e){a[e.stream].employees+=1,n=n<a[e.stream].employees?a[e.stream].employees:n}),Object.keys(e.vacancies).forEach(function(t){a[t].vacancies+=e.vacancies[t]}),Object.keys(e.backfills).forEach(function(t){a[t].backfills+=e.backfills[t]})});var i=[];return Object.keys(a).forEach(function(e){i.push(Object(c.a)({stream:e},a[e]))}),r.a.createElement(ke.e,{width:"100%",minHeight:200},r.a.createElement(ke.b,{data:i},r.a.createElement(ke.g,{dataKey:"stream"}),r.a.createElement(ke.h,null),r.a.createElement(ke.c,null),r.a.createElement(ke.f,null),r.a.createElement(ke.d,null),r.a.createElement(ke.a,{dataKey:"employees",stackId:"a",fill:"#00ccc8"}),r.a.createElement(ke.a,{dataKey:"vacancies",stackId:"a",fill:"#f5aa3c"}),r.a.createElement(ke.a,{dataKey:"backfills",stackId:"a",fill:"#ea73ea"})))},Se=function(e){var t=e.employees,a=e.teams;return r.a.createElement(y.List,null,t.filter(function(e){return e.startDate}).map(function(e){return r.a.createElement(y.ListItem,{key:e.id,primaryText:"".concat(e.name," - ").concat(e.memberOf?a[e.memberOf].name:"Unassigned"),secondaryText:e.startDate})}))},Le=function(e){var t=e.employees,a=e.teams;return r.a.createElement(y.List,null,t.filter(function(e){return"EMPLOYEE"!==e.type}).map(function(e){return r.a.createElement(y.ListItem,{key:e.id,primaryText:"".concat(e.name," - ").concat(e.memberOf?a[e.memberOf].name:"Unassigned"),secondaryText:e.type})}))},Re=a(41);var Ie=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.data.get("teams");if(!e)return null;var t=[e.toJS()].reduce(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(a,n){n.parents=t.slice(),a.push(n);var r=t.slice();return r.push(n.name),n.children&&n.children.length>0&&n.children.reduce(e(r),a),a}}(),[]),a=t.reduce(function(e,t){return e[t.id]=t,e},{});return r.a.createElement("div",null,r.a.createElement(Re.Table,{selectable:!1},r.a.createElement(Re.TableHeader,{adjustForCheckbox:!1,enableSelectAll:!1,displaySelectAll:!1},r.a.createElement(Re.TableRow,null,r.a.createElement(Re.TableHeaderColumn,null,"Team"),r.a.createElement(Re.TableHeaderColumn,null,"Tech Lead"),r.a.createElement(Re.TableHeaderColumn,null,"Product Lead"))),r.a.createElement(Re.TableBody,{displayRowCheckbox:!1},t.map(function(e){return r.a.createElement(Re.TableRow,{key:"".concat(e.id)},r.a.createElement(Re.TableRowColumn,{key:"".concat(e.id),style:{paddingLeft:"".concat(20*e.parents.length+20,"px")}},e.name),r.a.createElement(Re.TableRowColumn,{style:{opacity:e.techLead?1:.5},key:"tlead_".concat(e.id)},function(e,t){if(e.techLead)return e.techLead.name;for(var a=e.parent;a;){if(!t[a])return"";if(t[a].techLead)return t[a].techLead.name;a=t[a].parent}return""}(e,a)),r.a.createElement(Re.TableRowColumn,{style:{opacity:e.productLead?1:.5},key:"plead_".concat(e.id)},function(e,t){if(e.productLead)return e.productLead.name;for(var a=e.parent;a;){if(!t[a])return"";if(t[a].productLead)return t[a].productLead.name;a=t[a].parent}return""}(e,a)))}))))}}]),t}(r.a.Component),je=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"renderChart",value:function(e){for(;this.refs.chart.firstChild;)this.refs.chart.removeChild(this.refs.chart.firstChild);var t=Ee(e);he("reporting-chart",t,"reporting-chart")}},{key:"componentWillReceiveProps",value:function(e){(this.props.reporting||e)&&e.reporting!==this.props.reporting&&this.renderChart(e.reporting.toJS())}},{key:"componentDidMount",value:function(){this.props.reporting&&this.renderChart(this.props.reporting.toJS())}},{key:"render",value:function(){return r.a.createElement("div",{id:"reporting-chart",ref:"chart"})}}]),t}(r.a.Component),De=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.Flex,{p:0,align:"center"},r.a.createElement(E.Box,{pb:0,w:.25,style:{alignSelf:"flex-start"}},r.a.createElement(G.a,{onClick:function(){var e=fe("reporting-chart");ge.a.saveAs(e,"reporting-structure.svg")}},r.a.createElement(be.a,null)))),r.a.createElement(je,{reporting:this.props.data.get("reporting")}))}}]),t}(r.a.Component),Pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).bang=function(){var e=a.state.admin.set("data",Object(se.fromJS)(Object(c.a)({teamsById:a.props.data.teamsById()},a.props.data.toLiteral())));a.setState({admin:e})},a.reparentTeam=function(e,t){a.props.data.reparentTeam(e,t),a.bang()},a.addToTeam=function(e,t){a.props.data.addToTeam(e,t),a.bang()},a.removeFromTeam=function(e){a.props.data.removeFromTeam(e),a.bang()},a.exportData=function(){a.setState({exportData:a.props.data.toJSON()})},a.importData=function(){a.props.data.fromJSON(a.refs.importData.getValue()),a.bang()},a.changeHeadcount=function(e,t,n){a.props.data.changeHeadcount(e,t,n),a.bang()},a.changeBackfills=function(e,t,n){a.props.data.changeBackfills(e,t,n),a.bang()},a.addNewTeam=function(e,t,n,r){a.props.data.addNewTeam(e,t,n,r),a.bang()},a.saveData=function(){var e=a.refs.dataURL.getValue();e||(e=localStorage.getItem("persistURL")),e?a.props.data.saveData(e).then(function(){a.bang();var t="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port).concat(window.location.pathname,"?q=").concat(encodeURIComponent(e));a.setState({url:t})}):alert("Could not work out persistence URL")},a.loadData=function(){var e=a.refs.dataURL.getValue();a.props.data.loadData(e).then(function(){return a.bang()});var t="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port).concat(window.location.pathname,"?q=").concat(encodeURIComponent(e));a.setState({url:t})},a.removeTeam=function(e){a.props.data.removeTeam(e),a.bang()},a.changeTeamName=function(e,t){a.props.data.changeTeamName(e,t),a.bang()},a.changeTeamDescription=function(e,t){a.props.data.changeTeamDescription(e,t),a.bang()},a.addEmployee=function(e,t,n,r,i,o,c,l){a.props.data.addEmployee(e,t,n,r,i,o,c,l),a.bang()},a.editEmployee=function(e,t,n,r,i,o,c,l,s){a.props.data.editEmployee(e,t,n,r,i,o,c,l,s),a.bang()},a.removeEmployee=function(e){a.props.data.removeEmployee(e),a.bang()},a.setTechLead=function(e,t){a.props.data.setTechLead(e,t),a.bang()},a.setProductLead=function(e,t){a.props.data.setProductLead(e,t),a.bang()},a.state={admin:Object(se.fromJS)({section:"teams",data:Object(c.a)({teamsById:e.data.teamsById()},e.data.toLiteral())})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;var t=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}("q");t||(t=localStorage.getItem("dataURL")),t&&this.props.data.loadData(t).then(function(){e.bang();var a="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port).concat(window.location.pathname,"?q=").concat(encodeURIComponent(t));e.setState({url:a})})}},{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(me.Tabs,{initialSelectedIndex:0},r.a.createElement(me.Tab,{label:"Team Chart"},r.a.createElement(Oe,{data:this.state.admin.get("data")})),r.a.createElement(me.Tab,{label:"Reporting Chart"},r.a.createElement(De,{data:this.state.admin.get("data")})),r.a.createElement(me.Tab,{label:"Leaders"},r.a.createElement(Ie,{data:this.state.admin.get("data")})),r.a.createElement(me.Tab,{label:"Manage"},r.a.createElement(ae,{section:this.state.admin.get("section"),data:this.state.admin.get("data"),actions:{reparentTeam:this.reparentTeam,addToTeam:this.addToTeam,removeFromTeam:this.removeFromTeam,changeHeadcount:this.changeHeadcount,changeBackfills:this.changeBackfills,addNewTeam:this.addNewTeam,changeTeamName:this.changeTeamName,changeTeamDescription:this.changeTeamDescription,removeTeam:this.removeTeam,addEmployee:this.addEmployee,editEmployee:this.editEmployee,removeEmployee:this.removeEmployee,setTechLead:this.setTechLead,setProductLead:this.setProductLead}})),r.a.createElement(me.Tab,{label:"STATS"},r.a.createElement(Ce,{data:this.state.admin.get("data")})),r.a.createElement(me.Tab,{label:"DATA"},r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Share URL",fullWidth:!0,textareaStyle:{fontFamily:"monospace",fontSize:"0.5em",lineHeight:"0.75em"},value:this.state.url?this.state.url:""}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Data URL",fullWidth:!0,textareaStyle:{fontFamily:"monospace",fontSize:"0.5em",lineHeight:"0.75em"},ref:"dataURL"}),r.a.createElement(I.a,{fullWidth:!0,label:"LOAD",onClick:this.loadData}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{fullWidth:!0,label:"SAVE",onClick:this.saveData}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Exported Data",multiLine:!0,rows:4,rowsMax:4,fullWidth:!0,value:this.state.exportData,textareaStyle:{fontFamily:"monospace",fontSize:"0.5em",lineHeight:"0.75em"}}),r.a.createElement(I.a,{fullWidth:!0,label:"EXPORT",onClick:this.exportData}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{floatingLabelText:"Import Data",multiLine:!0,rows:4,rowsMax:4,fullWidth:!0,textareaStyle:{fontFamily:"monospace",fontSize:"0.5em",lineHeight:"0.75em"},ref:"importData"}),r.a.createElement(I.a,{fullWidth:!0,label:"IMPORT",onClick:this.importData})))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Pe,{data:X}),document.getElementById("root"))}},[[313,1,2]]]);
//# sourceMappingURL=main.c3a557e9.chunk.js.map